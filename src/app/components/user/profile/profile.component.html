<section class="hostProfile">
  <div class="alert alert-success alert-abs" [class.active]="avatarChanged" role="alert">
    Your profile picture have changed successfully..
  </div>
  <div class="container fix-footer">
    <div class="row p-3 pt-4">
      <div class="col-md-3 text-center">
        <div class="profile-img-wrapper">
          <img src="{{ user.avatar }}" alt="Profile"/>
          <label title="Upload Image" class="upload-profile-pic" for="file"><svg width="20px" height="auto" fill="#5c9b4c" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z"/></svg></label>
        </div>
        <br/>
        <h5>Joined at {{ user.createdAt | date: 'dd/MM/yyyy' }}</h5>
        <h3>{{ user.firstname }} {{ user.lastname }}</h3>
        <input type="file" name="file" id="file" class="inputfile" (input)="onUpload($event)"
               [(ngModel)]="profilePicture"/>
        <br/><br/>
      </div>
      <div class="col-md-9">
        <div class="tab mb-3">
          <button class="tablinks" (click)="tabChanger(1)" mat-raised-button>
            Information
          </button>
          <button class="tablinks" (click)="tabChanger(2)" mat-raised-button>
            Favorite places
          </button>
        </div>

        <div [hidden]="index !== 1" class="fav-wrapper">
          <div class="row">
            <div class="col-md-8 col-12">
              <div>
                <div class="card-body login-form form-flow">
                  <form [formGroup]="form" disable (ngSubmit)="OnSubmit()">
                    <div class="mb-4">
                      <div class="input-group form-group mb-0 pb-0">
                        <div class="input-group-prepend">
                          <span class="input-group-text"><svg width="15px" height="auto" fill="white"
                                                              viewBox="0 0 1792 1792"
                                                              xmlns="http://www.w3.org/2000/svg"><path
                            d="M1596 380q28 28 48 76t20 88v1152q0 40-28 68t-68 28h-1344q-40 0-68-28t-28-68v-1600q0-40 28-68t68-28h896q40 0 88 20t76 48zm-444-244v376h376q-10-29-22-41l-313-313q-12-12-41-22zm384 1528v-1024h-416q-40 0-68-28t-28-68v-416h-768v1536h1280zm-928-896q8-11 21-12.5t24 6.5l51 38q11 8 12.5 21t-6.5 24l-182 243 182 243q8 11 6.5 24t-12.5 21l-51 38q-11 8-24 6.5t-21-12.5l-226-301q-14-19 0-38zm802 301q14 19 0 38l-226 301q-8 11-21 12.5t-24-6.5l-51-38q-11-8-12.5-21t6.5-24l182-243-182-243q-8-11-6.5-24t12.5-21l51-38q11-8 24-6.5t21 12.5zm-620 461q-13-2-20.5-13t-5.5-24l138-831q2-13 13-20.5t24-5.5l63 10q13 2 20.5 13t5.5 24l-138 831q-2 13-13 20.5t-24 5.5z"/></svg></span>
                        </div>
                        <input type="text" class="form-control" [(ngModel)]="user.firstname" formControlName="firstname"
                               placeholder="First Name"/>
                      </div>
                      <div class="mt-0 pt-0"
                           *ngIf="form.controls['firstname'].invalid &&(form.controls['firstname'].touched ||form.controls['firstname'].dirty)">
                        <small class="form-text text-danger m-0"
                               *ngIf="form.controls['firstname'].hasError('required')">*required first name</small>
                        <small class="form-text text-danger m-0"
                               *ngIf="form.controls['firstname'].hasError('minlength')">*min length is 2</small>
                      </div>
                    </div>
                    <div class="mb-4">
                      <div class="input-group form-group mb-0 pb-0">
                        <div class="input-group-prepend">
                          <span class="input-group-text">
                            <svg width="15px" height="auto" fill="white" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1596 380q28 28 48 76t20 88v1152q0 40-28 68t-68 28h-1344q-40 0-68-28t-28-68v-1600q0-40 28-68t68-28h896q40 0 88 20t76 48zm-444-244v376h376q-10-29-22-41l-313-313q-12-12-41-22zm384 1528v-1024h-416q-40 0-68-28t-28-68v-416h-768v1536h1280zm-928-896q8-11 21-12.5t24 6.5l51 38q11 8 12.5 21t-6.5 24l-182 243 182 243q8 11 6.5 24t-12.5 21l-51 38q-11 8-24 6.5t-21-12.5l-226-301q-14-19 0-38zm802 301q14 19 0 38l-226 301q-8 11-21 12.5t-24-6.5l-51-38q-11-8-12.5-21t6.5-24l182-243-182-243q-8-11-6.5-24t12.5-21l51-38q11-8 24-6.5t21 12.5zm-620 461q-13-2-20.5-13t-5.5-24l138-831q2-13 13-20.5t24-5.5l63 10q13 2 20.5 13t5.5 24l-138 831q-2 13-13 20.5t-24 5.5z"/></svg></span>
                        </div>
                        <input type="text" class="form-control" [(ngModel)]="user.lastname" formControlName="lastname" placeholder="Last Name"/>
                      </div>
                      <div
                        class="mt-0 pt-0"
                        *ngIf="form.controls['lastname'].invalid &&(form.controls['lastname'].touched ||form.controls['lastname'].dirty)">
                        <small class="form-text text-danger m-0" *ngIf="form.controls['lastname'].hasError('required')">*required lastname</small>
                        <small
                          class="form-text text-danger m-0"
                          *ngIf="
                            form.controls['lastname'].hasError('minlength')
                          "
                        >*min length is 2</small
                        >
                      </div>
                    </div>
                    <div class="mb-4">
                      <div class="input-group form-group mb-0 pb-0">
                        <div class="input-group-prepend">
                          <span class="input-group-text"
                          ><svg
                            width="15px"
                            height="auto"
                            fill="white"
                            viewBox="0 0 1792 1792"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                              <path
                                d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"
                              /></svg
                          ></span>
                        </div>
                        <input
                          type="text"
                          class="form-control"
                          [(ngModel)]="user.email"
                          formControlName="Email"
                          placeholder="Email"
                        />
                      </div>
                      <div
                        class="mt-0 pt-0"
                        *ngIf="
                          form.controls['Email'].invalid &&
                          (form.controls['Email'].touched ||
                            form.controls['Email'].dirty)
                        "
                      >
                        <small
                          class="form-text text-danger m-0"
                          *ngIf="form.controls['Email'].hasError('required')"
                        >*required email</small
                        >
                        <small
                          class="form-text text-danger m-0"
                          *ngIf="form.controls['Email'].hasError('pattern')"
                        >*invalid email</small
                        >
                        <small
                          class="form-text text-danger m-0"
                          *ngIf="form.controls['Email'].hasError('minlength')"
                        >*min length is 5</small
                        >
                      </div>
                    </div>
                    <div class="mb-4">
                      <div class="input-group form-group mb-0 pb-0">
                        <div class="input-group-prepend">
                          <span class="input-group-text"
                          ><svg
                            width="15px"
                            height="auto"
                            fill="white"
                            viewBox="0 0 1792 1792"
                            xmlns="http://www.w3.org/2000/svg"
                          >
                              <path
                                d="M1593 349l-640 1280q-17 35-57 35-5 0-15-2-22-5-35.5-22.5t-13.5-39.5v-576h-576q-22 0-39.5-13.5t-22.5-35.5 4-42 29-30l1280-640q13-7 29-7 27 0 45 19 15 14 18.5 34.5t-6.5 39.5z"
                              /></svg
                          ></span>
                        </div>
                        <div class="select-wrapper form-control">
                          <select
                            class="form-select"
                            [(ngModel)]="cito"
                            formControlName="cito"
                            required
                          >
                            <!-- <option value="cairo" selected>Cairo</option> -->
                            <option [ngValue]="null" [disabled]="true">
                              {{ user.city }}
                            </option>
                            <option
                              *ngFor="let city of cities"
                              value="{{ city }}"
                            >
                              {{ city }}
                            </option>
                          </select>
                        </div>
                      </div>
                    </div>

                    <div class="form-group">
                      <input
                        type="submit"
                        [disabled]="form.invalid"
                        value="{{iseditable?'Update':'Edit'}}"
                        class="btn float-right login_btn"
                      />
                    </div>
                    <small class="form-text text-danger">{{ erro }}</small>
                  </form>
                </div>
              </div>
            </div>
            <div class="col-md-4 col-12 text-center">
              <div>
                <h3 class="mt-3">Location map</h3>
                <div class="map-responsive">
                  <iframe src="https://www.google.com/maps/embed/v1/place?key=AIzaSyA0s1a7phLN0iaD6-UE7m4qP-z21pH0eSc&q=Egypt+giza" width="100%" height="100%" style="border-radius: 30px" allowfullscreen></iframe>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div [hidden]="index !== 2" class="fav-wrapper">
          <div *ngFor="let favorite of favorites" class="favorite-place m-2 p-1 pl-0 pr-3">
            <div class="row ">
              <div class="col-9 ml-0 d-flex align-items-center">
                <div class="fav-img-wrapper">
                  <img src="/assets/images/fav.png"
                       style="width: 100%" alt=""/>
                </div>
                <h2 class="text-secondary ml-3">{{ favorite.title }}</h2>
              </div>
              <div class="col-3 text-right svg-decoration">
                <svg routerLink="/trip/details/{{ favorite._id }}" class="p-0 m-2 mt-0 edit-delete-style" width="22px"
                     height="auto" fill="#5c9b4c" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M1216 1344v128q0 26-19 45t-45 19h-512q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h64v-384h-64q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h384q26 0 45 19t19 45v576h64q26 0 45 19t19 45zm-128-1152v192q0 26-19 45t-45 19h-256q-26 0-45-19t-19-45v-192q0-26 19-45t45-19h256q26 0 45 19t19 45z"/>
                </svg>
                <svg (click)="deleteFavorite(favorite._id)" class="p-0 m-2 mt-0 edit-delete-style" width="22px"
                     height="auto" fill="#5c9b4c" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"/>
                </svg>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
